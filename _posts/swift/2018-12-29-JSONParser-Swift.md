---
layout: post
title:  JSONParser-Swift
date:  2018-12-29 13:00:13
category: post
tags: [swift]
---

# JSONParser - Swift



### 목차

- 프로젝트 개요
- 프로젝트 주요 기능
- 힘들었던점 (이슈/해결) -> 따로 정리하자.
- 시작
- 프로젝트 구현 과정
- 마무리



## Step 01 : 정리

단순 List 분석을 시작할때 , 여러가지 방법을 생각했었다.

1. 스택을 활용해서 괄호가 맞으면 스택에 넣고 하나씩 빼면서 파싱하려고 했다. 파싱을 하면서 Dictionary 를 만들어서 출력하는 형태로 만들었다.

그렇지만, 미션의 목표에서 중요한 요구사항이 String, Int , Bool 데이터가 들어가 있는 배열 객체를 만드는것이다.

2. 각각 배열을 만들어서 데이터를 저장하려고 만들었으나, 배열은 들어가 있는 순서가 중요 할 수도 있기 때문에 ... 구조 변경하였다.

그래서 스택을 제거 하고 , 구조체를 만들었으며 , 사용자 input data를 저장하고 있게끔 만들었다.



## Step 02 : 정리

Object 분석

영어에서 data는 datum 의 복수형이에요!

이렇게 `datas` 가 각각 문자열 데이터를 갖고 있는 것은 타입별로 갖고 있어야 하는 것을 지키지 못하고 있네요.
더구나 object 타입은 배열이 아니라 Dictionary를 만들어야 합니다.
이번 미션에서는 JSON을 스위프트로 적합한 데이터 구조를 선택해서 저장하는 게 가장 중요합니다.

------

이번 단계를 진행하면서 느낀점!

1. 문제를 잘못 이해해서 오래걸렸다.

왜냐면? 나는 첫번째 완성해서 두번째 배열타입이 괄호만 체크해서 데이터를 가지고 있을 필요 없다 라고 생각을 해서 그냥 괄호 갯수만 체크했다. 이게 큰 문제가 있었다.

그래서 아에 새롭게 다시짰다 ㅋㅋㅋㅋㅋ 이제 앞으로는 시작하기전에 설계를 하고 접근하도록!!!



2. enum에 관해서 잘 몰랐다.

여태 한번도 enum을 사용하지 않았다.

3. 네이밍을 제대로 하자!
4. 이렇게 많이 바뀌었는데 커밋이 하나네요. 되돌리기 어려운 상태가 되어 버릴 수 있습니다.
   작은 변화 단위로 작업을 나누고 커밋도 더 자주하는 습관을 가지세요.



## Step 03 :

- GrammarChecker 테스트가 가능하도록 변경하였습니다.
- 정규표현식 패턴에 맞는 부분을 찾아서 추출하는 기능으로 변경하려고 보니 enum의 타입이 프로토콜에서도 사용하고 , 각 타입에 입력하거나 사용할때도 사용하길래 변경했습니다. 프로토콜 지향 프로그래밍 책에 나온 프로토콜을 채택해서 익스텐션하는 방법을 사용해 보았습니다.



일단 정규식을 작성하는데 오래걸림, 또한 커링을 사용해서 함수지향으로 구현해볼려고 했으나...점점 프로토콜 지향 프로그래밍으로 가는걸로 ㅋㅋㅋㅋ



## Step 04 :

- 중첩 구조 분석, 테스트코드 를 추가

이미 3단계에서 중첩에 관한걸 구현해놓아서 수월하게 넘어갔다.



## Step 05 :

- protocol typeData 를 추가하여 JSON 문자열 생성하도록 하였습니다.
- 중첩된 구조 생성은 구조가 다르기 때문에 manyTypeData 로 생성하도록 하였습니다.
- 고차함수 클로저 다양한 표현식을 사용하고 , <https://developer.apple.com/documentation/swift/array/2297359-contains> 를 활용해보았습니다.



다양한 방법을 활용해 보는 시간을 가진것 같다.



##Step 06 :

파일매니저 공부하였다.

- Command Line Argument 값에 따라 처리하도록 구현하였습니다.

지금처럼 File URL 방식을 사용하는것과 Bundle Path를 활용하는 것과 어떤 차이가 있는지 공부해보세요.

Bundle.main 을 사용했을때, 파일 위치를 찾을때 nil이 나왔습니다.
Bundle클래스는 메서드와 속성을 사용하여 알려진 번들 디렉토리의 위치를 얻고 해당 디렉토리에서 리소스를 검색할때 사용한다고 이해했습니다.
이후 ios 앱에서 번들 구조로 접근가능한 예제(이름과 버전 정보를 가져오는 예제)를 해보았습니다.

네 Mac 앱은 번들이 없어서 그렇습니다. 현재 위치를 알아오는 방법은 어떨까요?
지금 코드는 iOS 에서는 사용할 수 없는 코드가 되어버리거든요.

아! 이유를 알았습니다.
ios 에서는 Bundle Container 와 Data Container 구조여서 .desktopDirectory를 .documentDirectory로 변경하면 ios에서 사용할수 있지 않을까요?

네 그렇게 써도 도큐멘트 디렉토리를 써도 됩니다.
맥에서는 Current Directiory를 가져와도 됩니다.
`.documentDirectory`로 해서 변경해보고 마무리하죠.

Current Directiory는 따로 정리해보겠습니다.
.documentDirectory로 해서 변경하였습니다.

